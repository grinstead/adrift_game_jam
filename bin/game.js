'use strict';class aa{constructor(a,b,c){this.name=c;this.s=`${b}${c}`;switch(a){case "uniform":this.type=1;if("u_"!==b)throw Error(`uniform field "${this.s}" invalid, must start with u_`);break;case "in":this.type=2;if("a_"!==b)throw Error(`in field "${this.s}" invalid, must start with a_`);break;default:throw Error("Impossible");}}}function ba(a){const b=[];a.split("\n").forEach(c=>{(c=/^\s*(in|uniform)\s(?:\w+\s)*([ua]_)(\w+);/.exec(c))&&b.push(new aa(c[1],c[2],c[3]))});return b}
const ca=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function C(a,b){a.a.uniformMatrix4fv(a.f,!1,b);a.b.push(b)}function H(a,b,c,e=0){var d=a.b;d=d.length?d[d.length-1]:ca;C(a,new Float32Array([d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],b*d[0]+c*d[4]+e*d[8]+d[12],b*d[1]+c*d[5]+e*d[9]+d[13],b*d[2]+c*d[6]+e*d[10]+d[14],b*d[3]+c*d[7]+e*d[11]+d[15]]))}function da(a,b){const c=Math.cos(b);b=Math.sin(b);a.push(new Float32Array([c,0,b,0,0,1,0,0,-b,0,c,0,0,0,0,1]))}
class ea{constructor(a,b){this.a=a;this.f=b;this.b=[];a.uniformMatrix4fv(b,!1,ca)}pop(){return this.b.pop()}push(a){var b=this.b;0===b.length?C(this,a):(b=b[b.length-1],C(this,new Float32Array([a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+
a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]])))}}
class ja{constructor(a,b){this.name=a.name;var c=this.a=a.a;a=this.type=a.type;switch(a){case "vertex":var e=this.a.VERTEX_SHADER;break;case "fragment":e=this.a.FRAGMENT_SHADER;break;default:throw Error(`Unrecognized shader type "${a}"`);}e=this.b=c.createShader(e);c.shaderSource(e,b);c.compileShader(e);if(!c.getShaderParameter(e,c.COMPILE_STATUS))throw b=`Failed to compile ${this.name} ${a}-shader: ${c.getShaderInfoLog(e)}`,c.deleteShader(e),Error(b);this.na=ba(b)}}
function ka(a,...b){const c=a.a,e=a.P;b.forEach(d=>{a.X.push(d);c.attachShader(e,d.b)});return a}class la{constructor(a){this.name=a.name;this.N=a.N;a=this.a=a.a;this.b=!1;this.P=a.createProgram();this.X=[];this.l={};this.m={};this.stack=null}link(){if(this.b)return this;var a=this.a,b=this.P;a.linkProgram(b);if(!a.getProgramParameter(b,a.LINK_STATUS)){var c=`Failed to link ${this.name} program: ${a.getProgramInfoLog(b)}`;a.deleteProgram(b);throw Error(c);}this.b=!0;return this}}
function ma(a,b){var c=a.a,e=a.P;c.useProgram(e);for(var d={},f={},g=a.X,h=0;h<g.length;h++)for(var k=g[h].na,l=0;l<k.length;l++){var p=k[l];1===p.type?p.s in d||(d[p.name]=c.getUniformLocation(e,p.s)):p.s in f||(f[p.name]=c.getAttribLocation(e,p.s))}a.l=d;a.m=f;if(e=a.N)if(e in a.l)a.stack=new ea(c,a.l[e]);else throw Error(`No anchor point "${e}" in program`);try{b(c,a)}finally{a.l={},a.m={},a.stack=null}}
class ta{constructor(a,b,c,e,d){this.a=a;this.name=b;this.w=c;this.c=e;this.b=d(a)}bindTexture(){this.a.bindTexture(this.a.TEXTURE_2D,this.b)}}function I(a){return(new Promise((b,c)=>{const e=new Image;e.onload=()=>void b(e);e.onerror=()=>{c(Error(`failed to load ${a.src}`))};e.mode="no-cors";e.src=a.src})).then(b=>{const c=b.naturalWidth,e=b.naturalHeight;return new ta(a.a,a.name,c,e,ua(d=>{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,c,e,0,d.RGBA,d.UNSIGNED_BYTE,b)}))})}
function va(a){const b=a.width,c=a.height;return new ta(a.a,a.name,b,c,ua(e=>{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,b,c,0,e.RGBA,e.UNSIGNED_BYTE,a.Y,0)}))}function wa(a){return new ta(a.a,a.name,a.width,a.height,()=>a.Ca)}
function ua(a){return b=>{const c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);a(b);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindTexture(b.TEXTURE_2D,null);return c}};function J(a,b){const c=a.b.a;let e=a.f;null!=e?c.bindBuffer(c.ARRAY_BUFFER,e):(a.f=e=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,e),c.bufferData(c.ARRAY_BUFFER,a.R,c.STATIC_DRAW));c.activeTexture(c.TEXTURE0);a.b.bindTexture();c.uniform1i(b.l.texture,0);c.enableVertexAttribArray(b.m.texturePosition);c.vertexAttribPointer(b.m.texturePosition,2,c.FLOAT,!1,20,12);c.enableVertexAttribArray(b.m.position);c.vertexAttribPointer(b.m.position,3,c.FLOAT,!1,20,0)}
function O(a,b,c){if(!a.data.hasOwnProperty(b))throw Error(`Can not render unknown "${b}"`);b=a.data[b];a=a.b.a;const e=b.oa;a.drawArrays(a.TRIANGLE_STRIP,e[c%e.length],b.xa)}
class P{constructor(a,b){this.b=a;this.f=null;a=this.data={};const c=[];let e=0;for(const d in b){const f=b[d],g=[],h=f.length;if(0===h)throw Error("Sprite declared with 0 points");const k=f[0].length;if(0==k)throw Error("Sprite declared with list of length 5 (must be non-zero multiple of 5)");const l=k/5;for(let p=0;p<h;p++){const w=f[p];if(w.length!==k)throw Error("Sprite declared with inconsistent lengths of elements");g.push(e);c.push.apply(c,w);e+=l}a[d]={Ea:this,name:d,oa:g,xa:l}}this.R=new Float32Array(c)}}
function S({D:a=0,Ja:b=0,Ka:c=0,B:e,u:d,v:f,A:g,g:h,count:k,j:l=!1}){const p=e/f;f=d/f;return xa({x:a*p,y:b,z:c*f,width:p,height:f,W:e/g.w,V:d/g.c,g:h,count:k,j:l})}function xa({x:a=0,y:b=0,z:c=0,width:e,height:d,W:f,V:g,g:h,count:k,Ga:l=0,Ha:p=0,Ia:w=f,Fa:y=g,j:A=!1}){const m=[];for(let z=0;z<k;z++){const Q=l+z%h*w,B=p+Math.floor(z/h)*y;m.push(ya({x:a,y:b,z:c,width:e,height:d,la:Q,ja:Q+f,ma:B,ka:B+g,j:A}))}return m}
function ya({x:a=0,y:b=0,z:c=0,width:e,height:d,la:f,ma:g,ja:h,ka:k,j:l=!1}){l?l=h:(l=f,f=h);return[e-a,b,-c,f,k,-a,b,-c,l,k,e-a,b,d-c,f,g,-a,b,d-c,l,g]};function Z(a,b,c){a=a.f;null!=c?a.set(b,c):a.delete(b)}function za(a,b){b=a.f.get(b);const c=a.b;return!!b&&!!b.some(e=>(e=c.get(e))?(e.K=0,null!=e.L):!1)}function Aa(a){const b=a.f.get("showLights");if(b){const c=a.b;return b.reduce((e,d)=>(d=c.get(d))?(e+=d.K,d.K=0,e):e,0)}return 0}function Ka(a){const b=za(a,"left")?1:0;return(za(a,"right")?1:0)-b}
class La{constructor(a){this.b=new Map;this.f=new Map;a.addEventListener("keydown",b=>{Ma(this,b,!0)});a.addEventListener("keyup",b=>{Ma(this,b,!1)});a.onblur=()=>{this.b.clear()};a.onfocus=()=>{this.b.clear()}}}function Ma(a,b,c){b=b.key;a=a.b;const e=a.get(b);c?null==e?a.set(b,{L:Date.now(),K:1}):(null==e.L&&(e.L=Date.now()),e.K++):null!=e&&(e.L=null)};const Na=166/360/2;function Oa(a,b){const c=a.f.a,e=a.b;c.enable(c.BLEND);c.blendFunc(c.ONE,c.ONE);c.bindFramebuffer(c.FRAMEBUFFER,a.ta);c.viewport(0,0,e.w,e.c);ma(a.f,(d,f)=>{Pa(d,f,a,b)})}
class Qa{constructor(a,b,c,e){b/=4;c/=4;var d=new ja({a,type:"vertex"},"#version 300 es\nin vec3 a_position;\nin vec2 a_texturePosition;\n\nuniform mat4 u_projection;\n\nout vec2 v_texturePosition;\n\nvoid main() {\n    vec4 position = u_projection * vec4(a_position, 1);\n    float variance = 1.f / (position.z + 1.f);\n\n    vec4 result = vec4(position.x, -position.y * variance, -.5f * (position.z - 1.f) * variance, position.w * variance);\n    gl_Position = result;\n    v_texturePosition = a_texturePosition;\n}"),f=
new ja({a,type:"fragment"},"#version 300 es\nprecision mediump float;\n\nuniform sampler2D u_texture;\nuniform float u_threshold;\n\nin vec2 v_texturePosition;\nout vec4 output_color;\n\nvoid main() {\n    vec4 color = texture(u_texture, v_texturePosition.st);\n    color.a -= u_threshold;\n    if (color.a <= u_threshold) {\n        discard;\n    }\n    output_color = color;\n}");const g=new la({a,N:"projection"});ka(g,d,f).link();d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);f=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,f);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,d,0);a.bindFramebuffer(a.FRAMEBUFFER,null);const h=128/e;e=va({name:"fade",width:64,height:64,a,Y:Ra(e)});this.f=g;this.b=wa({Ca:d,name:"lighting",
width:b,height:c,a});this.ta=f;this.R=new P(e,{main:[[h,0,-h,1,0,h,0,h,1,1,-h,0,-h,0,0,-h,0,h,0,1]]})}}function Pa(a,b,c,e){e.wa?a.clearColor(0,0,0,1):a.clearColor(0,0,0,.2);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);e.za(a,b,()=>{const d=c.R;J(d,b);const f=b.l.threshold,g=e.Da;e.ya.forEach(h=>{if(!h.h){var k=h.startTime;k=(g-k)/(h.aa-k);a.uniform1f(f,.5*k*k);H(b.stack,h.x,h.y,h.z);O(d,"main",0);b.stack.pop()}})})}
function Ra(a){const b=new Uint8Array(16384),c=(f,g)=>{f/=a;g/=a;return f*f+g*g},e=Math.min(c(32,0),c(32,0));for(let f=0;64>f;f++)for(let g=0;64>g;g++){const h=4*(64*f+g);var d=c(g-32,f-32);const k=1-Math.sqrt(d/e);d=1E-4>=d?5:0;const l=Math.max(Math.round(255*k*k),0);b[h]=d+Math.max(Math.round(20*k),0);b[h+1]=d;b[h+2]=d;b[h+3]=l}return b};async function Sa(a){const [b,c]=await Promise.all([a("creature","assets/Enemy.png"),a("tentacle","assets/Tentacle.png")]);a=new P(b,{blink:xa({x:.15,z:.15,width:.3,height:.3,W:108/b.w,V:108/b.c,g:2,count:6})});var e=[],d=92,f=-22;const g=Math.sqrt(d*d+f*f);d/=g;f/=g;for(let h=0;29>h;h++){const k=h%5,l=Math.floor(h/5),p=[],w=(y,A)=>{const m=100*y,z=77*A-48;p.push((m*d+z*f)/g,y,(m*-f+z*d)/360/2,100*(k+y)/c.w,77*(l+A)/c.c)};w(1,1);w(0,1);w(1,0);w(0,0);e.push(p)}e=new P(c,{wiggle:e});return{ra:a,Ba:e}}
class Ta{constructor(a,b,c){this.x=this.Aa=a;this.y=b;this.z=c;this.fa=this.ga=0;this.U=[Ua(0,a,b,-1,1),Ua(1,a,b,-1,-1),Ua(2,a,b,1,1),Ua(3,a,b,1,-1)]}}function Va(a){const b=a.O;a.J.forEach(c=>{c.x=c.Aa+.5*Math.sin(b);var e=.5*Math.cos(b);if(b>c.ga){var d=c.fa;c.fa=(d+1)%c.U.length;d=c.U[d];e=c.x+.225*e+d.ua;.05<Math.abs(e-d.M)&&(c.ga=b+.125,d.ea=b+.125,d.ba=d.M,d.ca=d.S,d.da=d.T,d.M=e,d.S=c.y+d.va,d.T=0)}})}
function Wa(a,b){const c=a.stack,e=b.ia.$.ra,d=b.ia.$.Ba,f=b.O;J(e,a);b.J.forEach(g=>{H(c,g.x,g.y,g.z);g=Math.floor(8*f)%38;O(e,"blink",6>g?g:0);c.pop()});J(d,a);b.J.forEach(g=>{const h=g.z-.04;g.U.forEach(k=>{var l=g.x+k.pa,p=g.y+k.qa;let w=k.M,y=k.S,A=k.T;var m=k.ea;f<m&&(m=1-(m-f)/.125,w=Xa(m,k.ba,l,w),y=Xa(m,k.ca,p,y),A=Xa(m,k.da,h,A));l-=w;p-=y;m=h-A;const z=Math.sqrt(l*l+p*p+m*m);H(c,w,y,A);da(c,0<l?Math.atan(m/l):0===l?0<m?Math.PI/2:0===m?0:-Math.PI/2:Math.atan(m/l)+Math.PI);c.push(new Float32Array([z,
0,0,0,0,p,0,0,0,0,1,0,0,0,0,1]));O(d,"wiggle",Math.abs((Math.floor(24*f)+k.sa)%57+1-29));c.pop();c.pop();c.pop()})})}function Ua(a,b,c,e,d){const f=.2*e,g=.1*d;b+=f;c+=g;return{index:a,pa:.05*e,qa:.05*d,ua:f,va:g,ea:0,ba:b,ca:c,da:0,M:b,S:c,T:0,sa:0}}function Xa(a,b,c,e){return a*(a*e+(1-a)*c)+(1-a)*(a*c+(1-a)*b)};const Ya=[{C:422,F:285,H:415,I:353},{C:936,F:367,H:868,I:380},{C:1507,F:311,H:1469,I:318},{C:162,F:948,H:206,I:943},{C:1025,F:934,H:976,I:962}];
function Za(a){const b=1/18/18,c=f=>Math.max(0,Math.min(255,Math.round(256*(1-b*f*f)))),e=[];for(let f=0;2>f;f++)for(let g=0;18>g;g++)for(let h=0;2>h;h++){let k;var d=void 0;let l;d=g+6*h;18>d?(k=255,d=c(d),l=255):l=d=k=0;c(g+6*h);c(g+6*h+1);for(let p=0;2>p;p++)e.push(k,d,d,l)}a=va({name:"spark",width:72,height:2,a,Y:new Uint8Array(e)});return new P(a,{fading:xa({x:1/180,width:.04,height:2/180,W:1/18,V:1,g:18,count:18})})}function $a(a,b){return a.h?b.h?0:1:b.h?-1:a.y-b.y}
function ab(a,b){return fetch(b).then(c=>{if(!c.ok)throw Error(`failed to load ${b}`);return c.arrayBuffer()}).then(c=>a.decodeAudioData(c))}
window.onload=async function(){function a(){var q=Math.sin(Math.PI*(v+0)/8)/2+Math.sin(Math.PI*(v+0)/3)/8,r=Math.sin(Math.PI*(v+170)/8)/2+Math.sin(Math.PI*(v+130)/3)/8;fa=Math.asin((q-r)/100);Ba=Math.cos(fa);Ca=Math.sin(fa);Da=(q+r)/2;q=0;F===na&&v-K<5/R||(za(k,"attack")?(F=na,K=v,R=12,L&&L.stop(),r=B.createBufferSource(),r.buffer=Ea[Math.floor(Math.random()*Ea.length)],r.connect(B.destination),r.start(0)):(q=1.2*Ka(k),T=q*D,0!==T?(U+=T,V=0>T,F!==Fa&&(F=Fa,K=v,R=8)):F!==oa?(F=oa,K=v,R=12):null==L&&
K<v-4&&(L=B.createBufferSource(),L.buffer=bb,L.connect(B.destination),L.start(0))));r=Math.floor(48*v)-Math.floor(48*(v-D));for(let n=0;n<r;n++){let E=U+(cb-(T?.05:0))*(V?-1:1),G=.1*Math.sin(2*Math.PI*Math.random());var x=328/360,t=Math.PI/2;if(F===na){x=Math.floor(R*(v-K));t=Ya[x];E=U+(t.C-(x%3*644+284))*(V?-1:1)/360;G=-Math.abs(G);x=(565-(t.F-565*Math.floor(x/3)))/360;var M=(t.H-t.C)*(V?-1:1);t=Math.atan((t.F-t.I)/M);0<M&&(t+=Math.PI)}M=Math.PI/4*(Math.random()-.5)+t;const W=2*Math.random()+1.4;
t=W*Math.sin(M);M=W*Math.cos(M)+q;100<N.length&&N.pop();N.push({h:!1,x:E,y:0,z:x,i:M,G,o:t,startTime:v,aa:v+1.5,ha:!1})}const db=9.8*Ba*D,eb=9.8*Ca*D,Ga=1-.8*D;N.forEach(n=>{var E=n.h;if(!E&&v<n.aa){n.x+=n.i*D;n.y+=n.G*D;n.z+=n.o*D;E=n.o;n.ha?(n.i*=Ga,n.G*=Ga):(E-=db,n.i-=eb,n.o=E);const G=n.y;if(G<-Na||G>Na){const W=0<G?Na:-Na;n.y=W+(W-G);n.G=-n.G}0>n.z&&(-.01<E?(n.z=180,n.o=0,n.ha=!0):(n.z=-n.z,n.o=-.25*E))}else E||(n.h=!0)});N.sort($a);Va(X)}function b(q,r,x){C(r.stack,A);H(r.stack,-1.5,0,u.d/
2+u.c+.5);da(r.stack,fa);H(r.stack,0,0,Da);x(q,r);r.stack.pop();r.stack.pop();r.stack.pop()}function c(q,r){const x=r.stack;J(Ha,r);O(Ha,"main",0);J(Ia,r);O(Ia,"main",0);H(x,U,0,0);J(F,r);O(F,V?"left":"right",Math.floor(R*(v-K)));x.pop();Wa(r,X);J(Ja,r);N.forEach(t=>{t.h||(H(x,t.x,t.y,t.z),da(x,(0<=t.i?Math.PI:0)+Math.atan(t.o/t.i)),O(Ja,"fading",Math.floor(12*(v-t.startTime))),x.pop(),x.pop())})}function e(q,r){q.bindFramebuffer(q.FRAMEBUFFER,null);q.viewport(0,0,w,y);q.disable(q.BLEND);q.clearColor(0,
0,0,1);q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT);q.activeTexture(q.TEXTURE1);Q.b.bindTexture();q.uniform1i(r.l.lighting,1);q.activeTexture(q.TEXTURE0);b(q,r,c)}function d(){{const q=(Date.now()-fb)/1E3;D=q-X.O;v=X.O=q;ha=-1===ha?60:1/D/16+.9375*ha;f.innerHTML=`fps=${Math.round(ha)}`}Aa(k)%2&&(p=!p);!pa&&za(k,"fullscreen")&&(pa=g.requestFullscreen());a();Oa(Q,{za:b,Da:v,ya:N,wa:p});ma(z,e);requestAnimationFrame(d)}const f=document.getElementById("fps"),g=document.getElementById("canvas");var h=
window.getComputedStyle(g);const k=new La(document.body);Z(k,"left",["a","ArrowLeft"]);Z(k,"right",["d","ArrowRight"]);Z(k,"showLights",["l"]);Z(k,"attack",["f"," "]);Z(k,"fullscreen",["u"]);var l=parseInt(h.getPropertyValue("width"),10);h=parseInt(h.getPropertyValue("height"),10);let p=!1;const w=l,y=h;g.width=w;g.height=y;const A=new Float32Array([360/l,0,0,0,0,-360/h,.25,0,0,360/h,0,0,-1,-1,0,1]),m=g.getContext("webgl2",{antialias:!1,alpha:!1});m.enable(m.DEPTH_TEST);m.depthFunc(m.LEQUAL);l=new ja({a:m,
type:"vertex"},"#version 300 es\nin vec3 a_position;\nin vec2 a_texturePosition;\n\nuniform mat4 u_projection;\n\nout vec4 v_clipSpace;\nout vec2 v_texturePosition;\n\nvoid main() {\n    vec4 position = u_projection * vec4(a_position, 1);\n    float variance = 1.f / (position.z + 1.f);\n\n    vec4 result = vec4(position.x, position.y * variance, -.5f * (position.z - 1.f) * variance, position.w * variance);\n    gl_Position = result;\n    \n    v_clipSpace = result;\n    v_texturePosition = a_texturePosition;\n}");
h=new ja({a:m,type:"fragment"},"#version 300 es\nprecision mediump float;\n\nuniform sampler2D u_texture;\nuniform sampler2D u_lighting;\n\nin vec2 v_texturePosition;\nin vec4 v_clipSpace;\nout vec4 output_color;\n\nvoid main() {\n    vec4 clipSpace = vec4(.5f * (v_clipSpace.x + 1.f), -.5f * (v_clipSpace.y - 1.f), v_clipSpace.z, v_clipSpace.w);\n\n    vec4 color = texture(u_texture, v_texturePosition.st);\n    if (color.a == 0.0) {\n        discard;\n    }\n\n    vec4 light = texture(u_lighting, clipSpace.xy);\n    vec3 math = min(light.xyz + color.xyz * light.a, vec3(1.f, 1.f, 1.f));\n    output_color = vec4(math, color.a);\n}");
const z=new la({a:m,N:"projection"});ka(z,l,h).link();const Q=new Qa(m,w,y,360),B=new AudioContext,[Y,ia,qa,ra,sa,Ea,bb,gb]=await Promise.all([I({a:m,src:"assets/Back Wall.png",name:"wall"}),I({a:m,src:"assets/new floor Floor.png",name:"floor"}),I({a:m,src:"assets/Hero Breathing with axe.png",name:"idle"}),I({a:m,src:"assets/Hero Walking with axe.png",name:"walk"}),I({a:m,src:"assets/Axe Chop.png",name:"attack"}),Promise.all([ab(B,"assets/Grunt1.mp3"),ab(B,"assets/Grunt2.mp3"),ab(B,"assets/Grunt3.mp3")]),
ab(B,"assets/Theres something here.mp3"),Sa((q,r)=>I({a:m,name:q,src:r}))]);let L=null;const u={top:52/ia.c,w:ia.w/360,c:38/360,d:166/360,Z:218/ia.c},Ha=new P(Y,{main:[[Y.w/360,-u.d/2,Y.c/360,1,0,Y.w/360,-u.d/2,0,1,1,0,-u.d/2,Y.c/360,0,0,0,-u.d/2,0,0,1]]}),Ia=new P(ia,{main:[[u.w,u.d/2,-u.c,1,1,0,u.d/2,-u.c,0,1,u.w,u.d/2,0,1,u.Z,0,u.d/2,0,0,u.Z,u.w,-u.d/2,0,1,u.top,0,-u.d/2,0,0,u.top]]});l=220/405;const cb=1.125*(387/405-l),oa=new P(qa,{right:S({D:l,B:405,u:434,A:qa,v:360,g:5,count:16}),left:S({D:1-
l,B:405,u:434,A:qa,v:360,g:5,count:16,j:!0})}),Fa=new P(ra,{right:S({D:258/424,B:424,u:442,A:ra,v:360,g:2,count:8}),left:S({D:1-258/424,B:424,u:442,A:ra,v:360,g:2,count:8,j:!0})}),na=new P(sa,{right:S({D:284/644,B:644,u:565,A:sa,v:360,g:3,count:5}),left:S({D:1-284/644,B:644,u:565,A:sa,v:360,g:3,count:5,j:!0})});new P(Q.b,{main:[ya({width:2,height:1,la:0,ma:0,ja:1,ka:1})]});const X={ia:{$:gb},J:[],O:0},Ja=Za(m),N=[];let fb=Date.now(),v=0,ha=-1,D=0,U=4,T=0,V=!1,K=0,F=oa,R=12,pa=null;document.addEventListener("fullscreenchange",
()=>{document.fullscreenElement||(pa=null)});X.J.push(new Ta(U+2,0,.2));let fa,Ca,Ba,Da;requestAnimationFrame(d);g.onmousemove=()=>{}};
